import{_ as i,c as a,o as n,ae as e}from"./chunks/framework.U1Gow_7P.js";const c=JSON.parse('{"title":"Actions","description":"","frontmatter":{},"headers":[],"relativePath":"actions.md","filePath":"actions.md"}'),t={name:"actions.md"};function l(h,s,p,r,o,k){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="actions" tabindex="-1">Actions <a class="header-anchor" href="#actions" aria-label="Permalink to &quot;Actions&quot;">‚Äã</a></h1><p>Actions provide a streamlined way to create custom server-side business logic and expose it to the frontend as easily callable, type-safe functions. It&#39;s like creating simplified RPC (Remote Procedure Call) endpoint or a DRF Function Based View. The process involves defining a Python function in your Django backend, decorating it, and then running a command-line tool to automatically generate a corresponding TypeScript function for your frontend. It doesn&#39;t do any magic, it just streamlines the development process by allowing you to expose all the models and actions through the StateZero workflow. Under the hood, actions are simple DRF views.</p><h2 id="_1-creating-an-action-backend" tabindex="-1">1. Creating an Action (Backend) <a class="header-anchor" href="#_1-creating-an-action-backend" aria-label="Permalink to &quot;1\\. Creating an Action (Backend)&quot;">‚Äã</a></h2><p>Actions are created in your Django project by decorating a Python function with the <code>@action</code> decorator. The function must be located within an installed Django app in an actions.py file for it to be discoverable. If you want to place the action somewhere else, just make sure to manually import the file e.g in your apps.py</p><h3 id="basic-usage" tabindex="-1">Basic Usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to &quot;Basic Usage&quot;">‚Äã</a></h3><p>The simplest action is a Python function with the <code>@action</code> decorator. The function&#39;s name automatically becomes the action&#39;s unique identifier.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># In any file within a Django app, e.g., my_app/actions.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> statezero.core.actions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> action</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@action</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> send_welcome_email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Finds a user and sends them a welcome email.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    This docstring will be used for auto-generated documentation.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ... your logic here ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Sending email to user </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Email sent to user </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="decorator-parameters" tabindex="-1">Decorator Parameters <a class="header-anchor" href="#decorator-parameters" aria-label="Permalink to &quot;Decorator Parameters&quot;">‚Äã</a></h3><p>The <code>@action</code> decorator accepts several arguments to add validation, permission controls, and extra metadata.</p><ul><li><strong><code>name: str</code></strong> (Optional): Overrides the function name as the action&#39;s identifier. This is useful for preventing name collisions.</li><li><strong><code>serializer</code></strong>: A Django Rest Framework (DRF) serializer class to validate the incoming data payload.</li><li><strong><code>response_serializer</code></strong>: A DRF serializer class to validate and serialize the action&#39;s return value.</li><li><strong><code>permissions: list</code></strong>: A list of permission classes that control access to the action.</li><li><strong><code>docstring: str</code></strong> (Optional): An explicit docstring to use for documentation, which will take precedence over the function&#39;s own <code>__doc__</code>.</li></ul><h3 id="securing-actions-with-permissions-üîê" tabindex="-1">Securing Actions with Permissions üîê <a class="header-anchor" href="#securing-actions-with-permissions-üîê" aria-label="Permalink to &quot;Securing Actions with Permissions üîê&quot;">‚Äã</a></h3><p>You can control who can execute an action by passing a list of permission classes to the <code>permissions</code> argument. This provides a robust, two-step validation process.</p><p>Permission classes must inherit from <code>AbstractActionPermission</code> and implement two methods: <code>has_permission</code> and <code>has_action_permission</code>.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># statezero.core.interfaces.AbstractActionPermission</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractActionPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ABC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;Permission class for StateZero actions.&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @abstractmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> has_permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, request, action_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;View-level check before validation.&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @abstractmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> has_action_permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, request, action_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, validated_data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;Action-level check after validation.&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span></code></pre></div><ol><li><p><strong><code>has_permission(request, action_name)</code></strong>: This check runs <strong>before</strong> the input data is validated. It&#39;s ideal for broad, general checks, such as verifying that a user is authenticated. If it returns <code>False</code>, the request is immediately rejected.</p></li><li><p><strong><code>has_action_permission(request, action_name, validated_data)</code></strong>: This check runs <strong>after</strong> the input data has been successfully validated by the serializer. It&#39;s designed for specific, data-dependent checks (i.e., object-level permissions), as it gives you access to the <code>validated_data</code> dictionary.</p></li></ol><h4 id="example-implementation" tabindex="-1">Example Implementation <a class="header-anchor" href="#example-implementation" aria-label="Permalink to &quot;Example Implementation&quot;">‚Äã</a></h4><p>Let&#39;s create a permission class that first checks if a user is logged in, and then checks if they are authorized to create an invoice for a specific customer.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># my_app/permissions.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> statezero.core.interfaces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AbstractActionPermission</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customers.models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Customer </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># A hypothetical Customer model</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CanManageInvoice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AbstractActionPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> has_permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, request, action_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Step 1: General check. Is the user logged in?</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.user.is_authenticated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> has_action_permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, request, action_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, validated_data: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Step 2: Specific check using validated data.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Does the customer belong to the user&#39;s organization?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        customer_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validated_data.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;customer_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customer_id:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Should be caught by serializer, but a good safeguard</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            customer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Customer.objects.get(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">customer_id)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customer.organization </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.user.organization</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Customer.DoesNotExist:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><p>You would then apply this permission class to your action&#39;s decorator.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># my_app/actions.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .permissions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CanManageInvoice</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .serializers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CreateInvoiceInputSerializer, CreateInvoiceResponseSerializer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;invoicing_create_invoice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    serializer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CreateInvoiceInputSerializer,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    response_serializer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CreateInvoiceResponseSerializer,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    permissions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[CanManageInvoice] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &lt;-- Add permissions here</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_invoice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(customer_id, amount, is_urgent, request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;Creates a new invoice for a given customer.&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ... function logic ...</span></span></code></pre></div><p>Now, when this action is called, the permission checks run in sequence, providing layered security before your core business logic is ever executed.</p><h2 id="_2-generating-the-frontend-client" tabindex="-1">2. Generating the Frontend Client <a class="header-anchor" href="#_2-generating-the-frontend-client" aria-label="Permalink to &quot;2\\. Generating the Frontend Client&quot;">‚Äã</a></h2><p>After defining actions in the backend, you generate corresponding client-side functions using the StateZero CLI.</p><p>From your frontend project&#39;s root directory, run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> statezero-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sync-actions</span></span></code></pre></div><p>The CLI connects to your backend&#39;s <code>/actions-schema/</code> endpoint, fetches a list of all available actions, and presents an interactive prompt for you to select which ones to generate.</p><p>The tool then generates the necessary JavaScript (<code>.js</code>) and TypeScript declaration (<code>.d.ts</code>) files inside your configured <code>GENERATED_ACTIONS_DIR</code>. The files are automatically organized into subdirectories based on the Django app they belong to.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/src/generated-actions</span></span>
<span class="line"><span>‚îú‚îÄ‚îÄ general/</span></span>
<span class="line"><span>‚îÇ   ‚îú‚îÄ‚îÄ send-welcome-email.d.ts</span></span>
<span class="line"><span>‚îÇ   ‚îî‚îÄ‚îÄ send-welcome-email.js</span></span>
<span class="line"><span>‚îú‚îÄ‚îÄ invoicing/</span></span>
<span class="line"><span>‚îÇ   ‚îú‚îÄ‚îÄ invoicing-create-invoice.d.ts</span></span>
<span class="line"><span>‚îÇ   ‚îî‚îÄ‚îÄ invoicing-create-invoice.js</span></span>
<span class="line"><span>‚îî‚îÄ‚îÄ index.js</span></span></code></pre></div><hr><h2 id="_3-using-an-action-frontend" tabindex="-1">3. Using an Action (Frontend) <a class="header-anchor" href="#_3-using-an-action-frontend" aria-label="Permalink to &quot;3\\. Using an Action (Frontend)&quot;">‚Äã</a></h2><p>The generated files provide fully-typed functions that you can import directly into your frontend code.</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { invoicingCreateInvoice } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../generated-actions/invoicing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleCreateInvoice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> invoicingCreateInvoice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      customerId: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      amount: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;99.99&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Note: DecimalField is treated as a string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      isUrgent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The response is fully typed based on the response_serializer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Invoice created successfully!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, response.invoiceId);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // response.status -&gt; &quot;created&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // StateZero errors are automatically parsed into a helpful format</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Failed to create invoice:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>The generated function handles everything for you:</p><ul><li>Making the <code>axios</code> POST request to the correct backend endpoint (e.g., <code>/actions/invoicing_create_invoice/</code>).</li><li>Sending the parameters as the request payload.</li><li>Ensuring type safety for both inputs and the returned <code>Promise</code>.</li><li>Validating the server&#39;s response against the expected schema using Zod.</li><li>Parsing and throwing structured errors for easy debugging.</li></ul><hr><h2 id="the-end-to-end-flow" tabindex="-1">The End-to-End Flow <a class="header-anchor" href="#the-end-to-end-flow" aria-label="Permalink to &quot;The End-to-End Flow&quot;">‚Äã</a></h2><ol><li><strong>Define (Backend)</strong>: A developer defines a Python function and decorates it with <code>@action</code> in a Django app.</li><li><strong>Expose Schema (Backend)</strong>: The Django backend automatically exposes a schema of this action at the <code>/actions-schema/</code> endpoint, detailing its name, parameters, permissions, and documentation.</li><li><strong>Generate Client (Frontend)</strong>: The <code>syncActions</code> CLI command reads this schema and generates a corresponding TypeScript function in the frontend project.</li><li><strong>Call (Frontend)</strong>: A frontend developer imports and calls the generated function as if it were a local async function.</li><li><strong>Execute (Backend)</strong>: The generated function makes a <code>POST</code> request. The <code>ActionView</code> on the server finds the corresponding Python function, checks permissions, validates data with the specified DRF serializer, executes the logic, and returns the result.</li><li><strong>Receive Response (Frontend)</strong>: The frontend receives the response within the <code>Promise</code>, with types and data structure automatically validated.</li></ol>`,37)]))}const g=i(t,[["render",l]]);export{c as __pageData,g as default};
